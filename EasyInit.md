# Инициализация связи от ПЛК Easy
## Посылка инициализации
;;;S98;STP;S99;BDR?;S99;TDD1;BDR?;IDN?;IDN?;IDN?;IDN?;ICR0;ASF1;TAS0;TDD1;IDN?;STP;STP;STP;TAR;STP;ACL0;TAS0;ASS2;COF6;MSV?0;
## Установка тары
STP;STP;STP;[пауза 1-2 сек]TAR;STP;ACL0;TAS0;ASS2;COF6;MSV?0;
## Подбор настроек связи
Во время инициализации, если ус-во не отвечает на запросы, начинается подбор параметров связи (опрос на разных скоростях и четностях)
|ПОИСК СКОРОСТИ	|ЗАПРОС 	|РЕАКЦИЯ|
| ----------- | ----------- | ----------- |
|1 ШАГ	|;;;S98;STP;S99;BDR?;	|AED не отвечает на запрос, тк параметры связи другие|
|2 ШАГ	|ПЛК производит поиск, меняя параметры связи, пока устройство не ответит	|Предлагаю повторять запросы выше на разных скоростях, пока ус-во не ответит|
|3 ШАГ	|BDR,1;BDR38400;	|Ус-во принимает настройки|
|4 ШАГ	|Отправляем ИНИЦ ПОСЫЛКУ (см выше)	||

## Таблица используемых команд
|КОМАНДА	|ЗНАЧЕНИЕ	|ПРИМЕР ОТВЕТА |
| ----------- | ----------- | ----------- |
|;	|Очистка входного буфера	||
|S98;	|Широковещательная рассылка (без ответов)	||
|STP;	|Остановить передачу изм значений	||
|S99;	|Все уст-ва принимают команды и отвечают	||
|BDR?;	|Запрос частоты обмена	|9600,1 СRLF|
|TDD1;	|Запись параметров в EEPROM	|0 СRLF|
|IDN?;	|Запрос идентификатора уст-ва	|HBM,AD103C ,1234567,P70 CRLF|
|ICR0;	|Установка частоты измерений	|0 СRLF|
|ASF1;	|Установка параметров фильтра	|0 СRLF|
|TAS0;	|Режим Нетто	|0 СRLF|
|TAR;	|Тарировка	|0 СRLF|
|ACL0;	|Выключить автокалибровку	|0 СRLF|
|ASS2;	|Тип вх сигнала — изм от тензодатчика	|0 СRLF|
|COF6;	|Измерение 2 Байта LSB/MSB	|0 СRLF|
|MSV?0;	|Непр вывод изм значений, согласно формату COF||
|BDR38400;	|Установка скорости обмена	|0 СRLF|
|BDR,1;	|Установка бита четности	|0 СRLF|
